#!/usr/bin/env bash
#
# modified from this GH script:
#
# https://github.com/BreadOnPenguins/scripts/blob/master/screenshot_extra_features

export DISPLAY=:0
SHOTPATH="/home/kat/Pictures/Screenshots"
COUNT=$(find $SHOTPATH -type f -printf x | wc -c | awk '{print $1+1}' | awk '{printf "%04d\n", $0}')
FILE="$SHOTPATH/$COUNT.png"

# Determine screenshot utility
if command -v import &> /dev/null; then
    TOOL="import"
elif command -v scrot &> /dev/null; then
    TOOL="scrot"
else
    notify-send "Screenshot Tool Missing" "Neither ImageMagick (import) nor scrot is installed!"
    echo "Error: No screenshot tool found (import or scrot)."
    exit 1
fi

import -window root "$FILE" || exit 1

notify-send "Screenshot Taken" "Saved as ${FILE} in ${SHOTPATH}"
