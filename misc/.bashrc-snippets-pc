#!/bin/bash

cdmess() {
	# from this blog post:
	#
	# https://blog.larah.me/mess-directory/
	#
    today_tmpdir="${TMPDIR-/tmp}/${USER}_mess/$(date +%F)"
    mkdir -p "$today_tmpdir"
    cd "$(mktemp -d -p "${today_tmpdir}" XXXX)"
}

# don't log commands that start with a space
export HISTCONTROL=ignorespace

# fuzzy find/search thru (recent) bash history
hist() {
	cat ~/.bash_history | fzf | sh
}

# catppuccin colors for fzf
export FZF_DEFAULT_OPTS=" \
--color=spinner:#F2D5CF,hl:#E78284 \
--color=fg:#C6D0F5,header:#E78284,info:#CA9EE6,pointer:#F2D5CF \
--color=marker:#BABBF1,fg+:#C6D0F5,prompt:#CA9EE6,hl+:#E78284 \
--color=border:#414559,label:#C6D0F5"

# get a random free port. this is useful for my
# insane sysadmin website woman adventures
portfree() {
	while
		port=$(shuf -n 1 -i 49152-65535)
		netstat -atun | grep -q "$port"
	do
		continue
	done
	echo "$port"
}
